# Matrice de tests

### Authentication

| Fonctionnalité            | Scénario de test                             | Résultat Attendu                                                   |
| ------------------------- | -------------------------------------------- | ------------------------------------------------------------------ |
| Authentification (signin) | Connexion avec des identifiants valides      | Retourne un token, succès de la connexion                          |
| Authentification (signin) | Connexion avec un mot de passe invalide      | Retourne une erreur "Incorrect user or password"                   |
| Authentification (signin) | Connexion avec un email inexistant           | Retourne une erreur "Incorrect user or password"                   |
| Création d'utilisateur    | Création avec des données valides            | Utilisateur créé avec succès, données retournées sans mot de passe |
| Création d'utilisateur    | Rejet si l'email est invalide                | Retour d'une erreur spécifiant que l'email est invalide            |
| Création d'utilisateur    | Rejet si un champ est manquant               | Retour d'une erreur indiquant que tous les champs sont requis      |
| Création d'utilisateur    | Rejet si le type de donnée ne correspond pas | Retour d'une erreur spécifiant que le type de donnée est incorrect |

### User

| Fonctionnalité    | Scénario de test                                                   | MASTER                                     | ADMIN                                      | CLIENT                                     | Résultat Attendu                                       |
| ----------------- | ------------------------------------------------------------------ | ------------------------------------------ | ------------------------------------------ | ------------------------------------------ | ------------------------------------------------------ |
| Get all Users     | Accès aux utilisateurs                                             | **_<p style="text-align: center;">X</p>_** |                                            |                                            | MASTER récupère ADMIN et CLIENT, mais pas lui-même     |
| Get all Users     | Accès aux utilisateurs                                             |                                            | **_<p style="text-align: center;">X</p>_** |                                            | ADMIN récupère uniquement CLIENT                       |
| Get all Users     | Accès aux utilisateurs                                             |                                            |                                            | **_<p style="text-align: center;">X</p>_** | CLIENT reçoit "Access denied"                          |
| Get own user info | MASTER accède à ses informations                                   | **_<p style="text-align: center;">X</p>_** |                                            |                                            | Informations du MASTER retournées, mot de passe exclu  |
| Get own user info | ADMIN accède à ses informations                                    |                                            | **_<p style="text-align: center;">X</p>_** |                                            | Informations de l'ADMIN retournées, mot de passe exclu |
| Get own user info | CLIENT accède à ses informations                                   |                                            |                                            | **_<p style="text-align: center;">X</p>_** | Informations du CLIENT retournées, mot de passe exclu  |
| Update user       | Utilisateur met à jour ses propres informations                    |                                            |                                            |                                            | Mise à jour réussie, réponses 200                      |
| Update user       | Utilisateur essaie de mettre à jour les infos d'un autre           |                                            |                                            |                                            | Accès refusé, réponse 403                              |
| Update user       | Mise à jour d'un utilisateur inexistant                            |                                            |                                            |                                            | Erreur "Utilisateur non trouvé", réponse 404           |
| Update user       | Requête non autorisée                                              |                                            |                                            |                                            | Requête rejetée, réponse 401                           |
| Update user role  | MASTER met à jour le rôle d'un utilisateur                         | **_<p style="text-align: center;">X</p>_** |                                            |                                            | Mise à jour réussie, réponses 200                      |
| Update user role  | Utilisateur introuvable                                            | **_<p style="text-align: center;">X</p>_** |                                            |                                            | Accès refusé, réponse 403                              |
| Update user role  | ADMIN essaie de mettre à jour un rôle                              |                                            | **_<p style="text-align: center;">X</p>_** |                                            | Erreur "Utilisateur non trouvé", réponse 404           |
| Update user role  | CLIENT essaie de mettre à jour un rôle                             |                                            |                                            | **_<p style="text-align: center;">X</p>_** | Requête rejetée, réponse 401                           |
| Update password   | Mise à jour réussie avec ancien et nouveau mots de passe valides   |                                            |                                            |                                            | Mise à jour du mot de passe avec succès, réponse 200   |
| Update password   | Rejet de la mise à jour si l'ancien mot de passe est incorrect     |                                            |                                            |                                            | Message d'erreur "Incorrect old password", réponse 400 |
| Update password   | Application des exigences de longueur pour le nouveau mot de passe |                                            |                                            |                                            | Message d'erreur sur la longueur, réponse 400          |
| Delete user       | ADMIN tente de supprimer un compte MASTER                          |                                            | **_<p style="text-align: center;">X</p>_** |                                            | Échec de la suppression, réponse 403                   |
| Delete user       | MASTER supprime un compte CLIENT                                   | **_<p style="text-align: center;">X</p>_** |                                            |                                            | Suppression réussie, réponse 200                       |
| Delete user       | ADMIN supprime un compte CLIENT                                    |                                            | **_<p style="text-align: center;">X</p>_** |                                            | Suppression réussie, réponse 200                       |
| Delete user       | CLIENT tente de supprimer un autre compte CLIENT                   |                                            |                                            | **_<p style="text-align: center;">X</p>_** | Échec de la suppression, réponse 403                   |
| Delete user       | CLIENT supprime son propre compte                                  |                                            |                                            | **_<p style="text-align: center;">X</p>_** | Suppression réussie, réponse 200                       |
